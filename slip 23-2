import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class CurrencyConverter extends JFrame implements ActionListener {
    JTextField sgdField, usdField, euroField;
    boolean isUpdating = false;

    public CurrencyConverter() {
        setTitle("Currency Converter");
        setSize(300, 150);
        setLayout(new GridLayout(3, 2));

        add(new JLabel("Singapore Dollars"));
        sgdField = new JTextField();
        add(sgdField);

        add(new JLabel("US Dollars"));
        usdField = new JTextField();
        add(usdField);

        add(new JLabel("Euros"));
        euroField = new JTextField();
        add(euroField);

        sgdField.addActionListener(this);
        usdField.addActionListener(this);
        euroField.addActionListener(this);

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }

    public void actionPerformed(ActionEvent e) {
        if (isUpdating) return; // prevent nested updates

        try {
            isUpdating = true;

            if (e.getSource() == sgdField) {
                double sgd = Double.parseDouble(sgdField.getText());
                double usd = sgd / 1.41;
                double euro = sgd * 0.65;
                usdField.setText(String.format("%.2f", usd));
                euroField.setText(String.format("%.2f", euro));
            } else if (e.getSource() == usdField) {
                double usd = Double.parseDouble(usdField.getText());
                double sgd = usd * 1.41;
                double euro = usd * 0.92;
                sgdField.setText(String.format("%.2f", sgd));
                euroField.setText(String.format("%.2f", euro));
            } else if (e.getSource() == euroField) {
                double euro = Double.parseDouble(euroField.getText());
                double usd = euro / 0.92;
                double sgd = usd * 1.41;
                sgdField.setText(String.format("%.2f", sgd));
                usdField.setText(String.format("%.2f", usd));
            }

        } catch (NumberFormatException ex) {
            JOptionPane.showMessageDialog(this, "Invalid Input");
        } finally {
            isUpdating = false;
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(CurrencyConverter::new);
    }
}
